<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>BMA Wartung</title>

<style>
  body{margin:0;font-family:system-ui,-apple-system,Arial;background:#0f172a;}
  .bar{padding:12px;display:flex;gap:10px;align-items:center;flex-wrap:wrap;background:#0b1220;color:white;}
  select,button{padding:10px 14px;border-radius:14px;border:1px solid #334155;background:#111827;color:white;font-weight:600;}
  button{cursor:pointer;}
  .wrap{padding:10px;}
  .scroller{height:78vh;overflow:auto;background:white;border-radius:16px;-webkit-overflow-scrolling:touch;}
  .plan{position:relative;width:1600px;user-select:none;}
  .plan img{width:100%;display:block;}

  .mark{
    position:absolute;transform:translate(-50%,-50%);
    font-size:75px;font-weight:900;color:#8b5cf6;line-height:1;cursor:pointer;user-select:none;
    text-shadow:-3px -3px 0 #000, 3px -3px 0 #000, -3px 3px 0 #000, 3px 3px 0 #000, 0 8px 14px rgba(0,0,0,.4);
  }

  .nav{
    position:fixed;left:0;right:0;bottom:0;
    display:flex;justify-content:space-between;
    padding:20px;pointer-events:none;
  }
  .nav button{
    pointer-events:auto;width:70px;height:70px;border-radius:20px;
    font-size:28px;font-weight:900;
    background:rgba(0,0,0,.7);
    border:1px solid rgba(255,255,255,.3);
    transition:opacity .15s ease;
  }

  .disabled{opacity:0.25 !important;pointer-events:none !important;cursor:default !important;}

  .hint{
    position:fixed;right:12px;top:12px;
    background:rgba(0,0,0,.65);color:#fff;border:1px solid rgba(255,255,255,.25);
    border-radius:12px;padding:10px 12px;font-size:13px;display:none;
  }

  .chip{
    padding:10px 14px;border-radius:14px;border:1px solid #334155;background:#111827;color:white;font-weight:700;
  }
</style>
</head>

<body>

<div class="bar">
  <label>Station:
    <select id="stationSelect"></select>
  </label>

  <label>Level:
    <select id="levelSelect"></select>
  </label>

  <button id="levelUp">⬆ Level</button>
  <button id="levelDown">⬇ Level</button>

  <div class="chip" id="pageInfo">Seite: 1/1</div>

  <button id="toggleAdmin">Admin: AUS</button>
  <button id="clearMarks">ALLES löschen</button>

  <button id="exportCurrent">PNG Export (dieses Bild)</button>
  <button id="exportStation">ZIP Export (ganze Station)</button>
</div>

<div class="wrap">
  <div class="scroller" id="scroller">
    <div class="plan" id="plan">
      <img id="planImg" alt="Plan">
    </div>
  </div>
</div>

<div class="nav">
  <button id="prev">◀</button>
  <button id="next">▶</button>
</div>

<div class="hint" id="adminHint">
  <b>Admin EIN</b><br>
  Klick irgendwo → ✔ setzen<br>
  Klick auf ✔ → löschen
</div>

<script src="data.js"></script>

<!-- ZIP-Library -->
<script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>

<script src="app.js"></script>

</body>
</html>